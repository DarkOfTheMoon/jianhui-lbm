Source code for the simulator